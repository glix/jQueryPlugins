/* jQuery Plugin: Curtail
 *
 * Version 1.0.0 (January 2015)
 *
 * Curtail is a small jQuery plugin that truncates text
 * to a specific number of characters and allows for show more text.
 *
 * License: none (public domain) http://unlicense.org/
 */

/* global jQuery */ 
(function(e){"use strict";e.fn.curtail=function(t){var n,r;n=e.extend({limit:250,ellipse:"..."},t);r=[];e(this).each(function(t){var i=e(this);r.push({p:i.children("p"),a:i.children("a"),len:function(){return this.p.text().length},btn:function(t){var n,r;n=this.oldP;r=this.p;if(t){this.a.each(function(){e(this).hide()})}else{this.a.each(function(){var t=e(this);t.click(function(){for(var i=0;i<r.length;i++){e(r[i]).text(n[i])}t.hide();return false})})}},cut:function(){var t,r,i,s,o,u;t="";r="";i=0;s=[];o=[];this.p.each(function(a,f){u=e(this);t=e(f).text();r=e(f).text().length;i+=r;s.push(t);if(i<n.limit){o.push(t)}else{o.push(function(){var e=r-(i-n.limit);if(e>0){return t.slice(0,e)+n.ellipse}return""}())}u.text(o[a])});this.oldP=s;this.newP=o},run:function(){if(this.len()>n.limit){this.cut();this.btn(false)}else{this.btn(true)}}});r[t].run()})}})(jQuery)